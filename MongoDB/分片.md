分片的三种优势

* 对集群进行抽象，让集群“不可见”

* 保证集群总是可读写

* 使群集易于扩展

分片集群架构节点

| 组件              | 说明                                                         |
| ----------------- | ------------------------------------------------------------ |
| **Config Server** | 存储集群所有节点、分片数据**路由**信息。默认需要配置3个Config Server节点。存取数据方式，分片功能的一些配置信息。可以理解为真实数据的元数据 |
| **Mongos**        | 提供对外应用访问端口，所有操作均通过**mongos**执行。一般有多个mongos节点 |
| **Mongod** shard  | 存储应用数据记录。一般有多个**Mongod**节点，达到数据分片目的 |

Chunk

在一个shard server内部，MongoDB还是会把数据分为chunks,每个chunk代表这个shard server内部一部分数据。chunk的产生，会有以下两个用途：

splitting: 当一个chunk的大小超过配置中的chunk size时，mongodb的后台进程会把这个chunk切分成更少的chunk，从而避免chunk过大的情况

Balancing: 在MongoDB中，blancing是一个后台进程，负责chunk的迁移，从而均衡shard server 的负载，系统初始1个chunk，chunk size默认值**64M**。

* 小的**chunk size**： 数据均衡迁移速度快，数据分布更均匀。数据分裂频繁，路由节点消耗更多的资源

* 大的**chunk size**：数据分裂少。数据块移动集中消耗IO资源。通过100 - 200M

